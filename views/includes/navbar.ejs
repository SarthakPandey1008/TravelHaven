
<nav class="navbar navbar-expand-md bg-body-light border-bottom sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="/listings" title="TravelHaven Home"><img src="/android-chrome-192x192.png" class="icon" ></a>
      <a class="navbar-brand nav-title " id="brand-name" href="/listings" title="TravelHaven Home" >ravelHaven</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <!-- <div class="navbar-nav" >
          <a class="nav-link" href="/listings" title="TravelHaven Home"style="color: #fe424d !important; font-weight: 900">TravelHaven</a>
        </div> -->
        <div class="navbar-nav ms-auto" >
          <form class="d-flex" role="search" action="/listings/search" method="GET">
            <!-- Search input with a fallback for undefined searchQuery -->
            <input 
              class="form-control me-2 search-inp searchinput" 
              type="search" 
              name="query" 
              placeholder="Search destinations" 
              aria-label="Search" 
              value="<%= typeof searchQuery !== 'undefined' ? searchQuery : '' %>"> 
            <button class="btn search-btn" type="submit" title="Search">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </form>
        </div>
        
        <div class="navbar-nav ms-auto">
          <a class="nav-link" href="/listings/new" style="font-size: 0.93rem; font-weight: 700;">List your place</a>
          <% if (!currUser) { %>
            <a class="nav-link" href="/signup"  style="font-size: 0.93rem; font-weight: 500;" >Signup</a>
            <a class="nav-link" href="/login"  style="font-size: 0.93rem; font-weight: 500;;">Log in</a>
          <% } else if (currUser) { %>
            <!-- <a class="nav-link" href="/logout"><b style="color: red">Log out</b></a> -->
            <div  class="navbtn" style="position: relative; display: flex;">
          
              <a  id="optionsButton" class="circular-button" title="<%=currUser.username%>" style="text-decoration: none; margin-right: 1.3rem; margin-left: 0.5rem"><%=currUser.username.charAt(0).toUpperCase()%></a>  
              <div id="optionsCard" class="card" style="display: none;">
              <ul class="list-group list-group-flush">
                <a href="/logout" id="logout"  class="list-group-item" >
                  <li style="list-style-type: none;">Logout</li>
              </a>
              </ul>
          </div>
      </div>
            
          <% } %>
        </div>
      </div>
    </div>
  </nav>
  
    <script>

function updateAnchorText() {
    const anchor = document.getElementById('brand-name');

    if (window.innerWidth <= 767) {
        anchor.textContent = "TravelHaven"; // Change the text when the screen size is 768px or less
    } else {
        anchor.textContent = "ravelHaven"; // Restore the original text for larger screens
    }
}

// Call immediately to set the text based on the initial screen size
updateAnchorText(); 

// Call the function on window resize
window.addEventListener('resize', updateAnchorText);




document.querySelector('form[role="search"]').addEventListener('submit', function(event) {
    const input = document.querySelector('input[name="query"]');
    const btn = document.querySelector(".search-btn");
    if (input.value.trim() === '') {
      btn.style.boxShadow = "0 0.1rem 0.1rem rgba(0, 0, 0, 0.2)";
        event.preventDefault(); // Prevent form submission
    } else {
      btn.style.boxShadow = "0 0.1rem 0.1rem rgba(0, 0, 0, 0.2)";
    }
});

const optionsButton = document.getElementById('optionsButton');
const optionsCard = document.getElementById('optionsCard');

// Toggle card visibility on button click
optionsButton.addEventListener('click', (e) => {
    e.stopPropagation(); // Prevent click from bubbling to the document
    if (optionsCard.style.display === 'none' || optionsCard.style.display === '') {
        optionsCard.style.display = 'flex';
    } else {
        optionsCard.style.display = 'none';
    }
});

// Hide card when clicking outside of it
document.addEventListener('click', () => {
    optionsCard.style.display = 'none';
});

// Prevent card from hiding when clicking inside the card
optionsCard.addEventListener('click', (e) => {
    e.stopPropagation(); // Prevent click from bubbling to the document
});

</script>
