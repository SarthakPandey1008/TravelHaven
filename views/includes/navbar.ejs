
<nav class="navbar navbar-expand-md bg-body-light border-bottom sticky-top">
  <div class="container-fluid">
      <a class="navbar-brand" href="/" title="TravelHaven Home">
          <img src="/TravelHavenLogo.png" class="icon">
      </a>
      <a class="navbar-brand nav-title" id="brand-name" href="/" title="TravelHaven Home" data-intro="This is the TravelHaven brand name. Click here to return to the homepage.">TravelHaven</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" data-intro="Use this button to toggle the navigation menu on smaller screens.">
          <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav ms-auto">
              <form class="d-flex" role="search" action="/listings/search" method="GET" data-intro="Search for your desired accommodations here.">
                  <input class="form-control me-2 search-inp searchinput" type="search" name="query" placeholder="Search destinations" aria-label="Search" value="<%= typeof searchQuery !== 'undefined' ? searchQuery : '' %>">
                  <button class="btn search-btn" type="submit" title="Search" data-intro="Click here to search for listings.">
                      <i class="fa-solid fa-magnifying-glass"></i>
                  </button>
              </form>
          </div>

          <div class="navbar-nav ms-auto">
              <a class="nav-link" href="/listings/new" style="font-size: 0.93rem; font-weight: 700;" data-intro="List your own place by clicking here.">List your place</a>
              <% if (!currUser) { %>
                  <a class="nav-link" href="/signup" style="font-size: 0.93rem; font-weight: 500;" data-intro="Create a new account by clicking here.">Signup</a>
                  <a class="nav-link" href="/login" style="font-size: 0.93rem; font-weight: 500; margin-right: 1.3rem" data-intro="Log in to your account here.">Log in</a>
              <% } else if (currUser) { %>
                  <div class="navbtn" style="position: relative; display: flex;">
                      <a id="optionsButton" class="circular-button" title="<%=currUser.username%>" data-intro="Click here to access account options."><%=currUser.username.charAt(0).toUpperCase()%></a>
                      <div id="optionsCard" class="card" style="display: none;">
                          <ul class="list-group list-group-flush">
                              <a href="/logout" id="logout" class="list-group-item">
                                  <li style="list-style-type: none;">Logout</li>
                              </a>
                          </ul>
                      </div>
                  </div>
              <% } %>
          </div>
      </div>
  </div>
</nav>

  
    <script>
      
function startTour() {
    introJs().setOptions({
        steps: [
            {
                element: '.navbar-brand.nav-title',
                intro: 'This is the TravelHaven brand name. Click here to return to the homepage.',
            },
            {
                element: '.navbar-toggler',
                intro: 'Use this button to toggle the navigation menu on smaller screens.',
            },
            {
                element: 'form[role="search"]',
                intro: 'Search for your desired accommodations here.',
            },
            {
                element: '.search-btn',
                intro: 'Click here to search for listings.',
            },
            {
                element: 'a[href="/listings/new"]',
                intro: 'List your own place by clicking here.',
            },
            {
                element: 'a[href="/signup"]',
                intro: 'Create a new account by clicking here.',
            },
            {
                element: 'a[href="/login"]',
                intro: 'Log in to your account here.',
            },
            {
                element: '#optionsButton',
                intro: 'Click here to access account options.',
            }
        ],
        nextLabel: 'Next',
        prevLabel: 'Previous',
        doneLabel: 'Done',
        skipLabel: 'Skip',
    }).start();
}

// Call the function when the page loads or attach it to a button
window.onload = function() {
    startTour(); // Start the tour on page load (or replace with a button click if preferred)
};



function updateAnchorText() {
    const anchor = document.getElementById('brand-name');

    if (window.innerWidth <= 767) {
        anchor.textContent = "TravelHaven"; // Change the text when the screen size is 768px or less
    } else {
        anchor.textContent = "ravelHaven"; // Restore the original text for larger screens
    }
}

// Call immediately to set the text based on the initial screen size
updateAnchorText(); 

// Call the function on window resize
window.addEventListener('resize', updateAnchorText);




document.querySelector('form[role="search"]').addEventListener('submit', function(event) {
    const input = document.querySelector('input[name="query"]');
    const btn = document.querySelector(".search-btn");
    if (input.value.trim() === '') {
      btn.style.boxShadow = "0 0.1rem 0.1rem rgba(0, 0, 0, 0.2)";
        event.preventDefault(); // Prevent form submission
    } else {
      btn.style.boxShadow = "0 0.1rem 0.1rem rgba(0, 0, 0, 0.2)";
    }
});

const optionsButton = document.getElementById('optionsButton');
const optionsCard = document.getElementById('optionsCard');

// Toggle card visibility on button click
optionsButton.addEventListener('click', (e) => {
    e.stopPropagation(); // Prevent click from bubbling to the document
    if (optionsCard.style.display === 'none' || optionsCard.style.display === '') {
        optionsCard.style.display = 'flex';
    } else {
        optionsCard.style.display = 'none';
    }
});

// Hide card when clicking outside of it
document.addEventListener('click', () => {
    optionsCard.style.display = 'none';
});

// Prevent card from hiding when clicking inside the card
optionsCard.addEventListener('click', (e) => {
    e.stopPropagation(); // Prevent click from bubbling to the document
});

</script>
